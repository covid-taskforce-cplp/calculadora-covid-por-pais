<!doctype html>
<!--
    Licen√ßa: Dom√≠nio P√∫blico
    Codigo Fonte: https://github.com/covid-taskforce-cplp/calculadora-covid-por-pais
-->

<html lang="pt">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="./css/codigo-terceiros/bootstrap.min.css">
  <title>covid-taskforce-cplp/calculadora-covid-por-pais v0.4.0</title>
</head>

<body>
  <div class="container">
    <h1>covid-taskforce-cplp/calculadora-covid-por-pais v0.4.0 <sup>alpha</sup></h1>

    <!--
      TODO: os campos que envolvem numeros grandes, como 209300000, poderiam
            ser alterados para visualmente exibir 209 300 000 ou
            209.300.000 e facilitar para usu√°rio ter ideia da quantidade.
            (fititnt, 2020-03-28 00:26 BRT)

      TODO: os campos que aceitam numeros poderiam permitir colar valores
            com pontos ou espa√ßos em vez de for√ßar o usu√°rio a inserir
            apenas n√∫meros
            (fititnt, 2020-03-28 00:26 BRT)
    -->

    <form id="formulario-simulacao">
      <div class="row">
        <div class="col-sm">
          <div class="form-group">
            <label for="populacao-sugestao">Popula√ß√£o pr√©-definidas</label>
            <small id="populacao-sugestao-dica" class="form-text text-muted">Al√©m de usar valores customizados, voc√™ pode aceitar sugest√µes pr√©-definidas</small>
            <select class="form-control" id="populacao-sugestao" aria-describedby="populacao-dica">
              <option data-var="dados_populacao_customizado" selected>Customizado</option>
              <option data-var="dados_populacao_brasil">üáßüá∑ Brasil</option>
              <option data-var="dados_populacao_brasil_rs">üáßüá∑ Brasil, Rio Grande do Sul</option>
            </select>
            <div class="form-text text-muted"><small>Fonte: <em><span id="populacao-sugestao-metadata">Customizado</span></em></small></div>
          </div>
        </div>
        <div class="col-sm">
          <div class="form-group">
            <div class="populacao-simples-campos" style="display: block">
              <label for="populacao-total">Popula√ß√£o Total</label>
              <small id="populacao-total-dica" class="form-text text-muted">Informe a popula√ß√£o total da regi√£o.</small>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">0-120</span>
                </div>
                <input type="number" class="form-control" id="populacao-total" aria-describedby="populacao-total-dica" placeholder="Popula√ß√£o total" required value="">
              </div>
            </div>
            <div class="populacao-simples-campos" style="display: none">
              <label for="populacao-total">Popula√ß√£o Total por faixa de idade</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;&nbsp;0-10</span>
                </div>
                <input type="number" class="form-control" id="populacao-total-de-0-ate-10" placeholder="Popula√ß√£o de 0 a 10 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;11-20</span>
                </div>
                <input type="number" class="form-control" id="populacao-total-de-11-ate-20" placeholder="Popula√ß√£o de 11 a 20 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;21-30</span>
                </div>
                <input type="number" class="form-control" id="populacao-total-de-21-ate-30" placeholder="Popula√ß√£o de 21 a 30 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;31-40</span>
                </div>
                <input type="number" class="form-control" id="populacao-total-de-31-ate-40" placeholder="Popula√ß√£o de 31 a 40 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;41-50</span>
                </div>
                <input type="number" class="form-control" id="populacao-total-de-41-ate-50" placeholder="Popula√ß√£o de 41 a 50 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;51-60</span>
                </div>
                <input type="number" class="form-control" id="populacao-total-de-51-ate-60" placeholder="Popula√ß√£o de 51 a 60 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;61-70</span>
                </div>
                <input type="number" class="form-control" id="populacao-total-de-61-ate-70" placeholder="Popula√ß√£o de 61 a 60 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;71-80</span>
                </div>
                <input type="number" class="form-control" id="populacao-total-de-71-ate-80" placeholder="Popula√ß√£o de 71 a 80 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">81-120</span>
                </div>
                <input type="number" class="form-control" id="populacao-total-de-81-ate-120" placeholder="Popula√ß√£o de 81 a 120 anos" value="">
              </div>
            </div>

            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="populacao-simples" checked onclick="jQuery('.populacao-simples-campos').toggle()">
              <label class="form-check-label" for="populacao-simples">Simples (sem faixas de idade)</label>
            </div>
          </div>
        </div>
      </div>

      <hr />

      <div class="row">
        <div class="col-sm">
          <div class="form-group">
            <label for="cenario-sugestao">Cen√°rios pr√©-definidos</label>
            <small id="cenario-dica" class="form-text text-muted">Estimativas sugeridas conforme relat√≥rios oficiais</small>
            <select class="form-control" id="cenario-sugestao" aria-describedby="cenario-dica">
              <option data-var="" selected>Customizado</option>
              <option data-var="dados_cenario_alemanha">üá©üá™ Alemanha, 2020-03-26</option>
              <option data-var="dados_cenario_10p_infeccao_01letalidade">10% da popula√ß√£o, 0,1% letal</option>
              <option data-var="dados_cenario_10p_infeccao_05letalidade">10% da popula√ß√£o, 0,5% letal</option>
              <option data-var="dados_cenario_50p_infeccao_01letalidade">50% da popula√ß√£o, 0,1% letal</option>
              <option data-var="dados_cenario_50p_infeccao_05letalidade">50% da popula√ß√£o, 0,5% letal</option>
            </select>
            <div class="form-text text-muted"><small>Fonte: <em><span id="cenario-metadata">Customizado</span></em></small></div>
          </div>
        </div>
        <div class="col-sm">
          <div class="form-group">
            <div class="populacao-infectada-percentual-simples-campos" style="display: block">
              <label for="populacao-infectada-percentual">Percentual de pessoas infectadas</label>
              <small id="populacao-infectada-percentual-dica" class="form-text text-muted">Percentual de da popula√ß√£o total que <strong><em>no final</em></strong> da epidemia na regi√£o teria sido contamidana</small>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">0-120</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual" aria-describedby="populacao-infectada-percentual-dica" placeholder="% de pessoas infectadas" required value="">
              </div>
            </div>
            <div class="populacao-infectada-percentual-simples-campos" style="display:none">
              <label>Percentual de pessoas infectadas</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;&nbsp;0-10</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual-0-ate-10" placeholder="% de pessoas infectadas de 0 a 10 anos" required value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;11-20</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual-11-ate-20" placeholder="% de pessoas infectadas de 11 a 20 anos" required value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;21-30</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual-21-ate-30" placeholder="% de pessoas infectadas de 21 a 30 anos" required value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;31-40</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual-31-ate-40" placeholder="% de pessoas infectadas de 31 a 40 anos" required value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;41-50</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual-41-ate-50" placeholder="% de pessoas infectadas de 41 a 50 anos" required value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;51-60</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual-51-ate-60" placeholder="% de pessoas infectadas de 51 a 60 anos" required value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;61-70</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual-61-ate-70" placeholder="% de pessoas infectadas de 61 a 70 anos" required value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;71-80</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual-71-ate-80" placeholder="% de pessoas infectadas de 71 a 80 anos" required value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">81-120</span>
                </div>
                <input type="number" class="form-control" id="populacao-infectada-percentual-81-ate-120" placeholder="% de pessoas infectadas de 81 a 120 anos" required value="">
              </div>
            </div>

            <div class="form-check populacao-simples-campos" style="display: none">
              <input type="checkbox" class="form-check-input" id="populacao-infectada-percentual-simples" checked onclick="jQuery('.populacao-infectada-percentual-simples-campos').toggle()">
              <label class="form-check-label" for="populacao-infectada-percentual-simples">Simples (change de ser infactado padr√£o para todas as idades)</label>
            </div>
          </div>
          <div class="form-group">
            <div class="letalidade-simples-campos" style="display: block">
              <label for="epidemia-letalidade-media">Letalidade infec√ß√£o</label>
              <small id="epidemia-letalidade-media-dica" class="form-text text-muted">
                Nesta vers√£o, ainda n√£o √© poss√≠vel especificar letalidade por faixa de idade.
                Por favor use uma m√©dia global.
              </small>
              <!-- <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="validationTooltipUsernamePrepend">0-120</span>
                </div>
                <input type="text" class="form-control" id="validationTooltipUsername" placeholder="Username" aria-describedby="validationTooltipUsernamePrepend" required>
                <div class="invalid-tooltip">
                  Please choose a unique and valid username.
                </div>
              </div> -->
              
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">0-120</span>
                </div>
                <!--
                  NOTA: na minha opini√£o o formulario nem mesmo deveria permitir
                        simular acima de 30%; a justificativa √© que n√£o encontrei
                        na literatura (mesmo se n√£o tiver qualquer tratamento
                        m√©dico e pessoa em idade avan√ßada) uma letalidade maior
                        que uns 20~25% (fititnt, 2020-13-26 16:56 BRT)
                -->
                <input type="number" min="0" max="30" step="0.01" class="form-control" id="epidemia-letalidade-media" aria-describedby="epidemia-letalidade-media-dica" placeholder="Informe um percentual" required value="">
              </div>
            </div>
            
            <div class="letalidade-simples-campos" style="display: none">
              <label for="epidemia-letalidade-media">Letalidade infec√ß√£o por faixa de idade</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;&nbsp;0-10</span>
                </div>
                <input type="number" class="form-control" id="letalidade-0-ate-10" placeholder="Letalidade de 0 a 10 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;11-20</span>
                </div>
                <input type="number" class="form-control" id="letalidade-11-ate-20" placeholder="Letalidade de 11 a 20 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;31-40</span>
                </div>
                <input type="number" class="form-control" id="letalidade-31-ate-40" placeholder="Letalidade de 31 a 40 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;41-50</span>
                </div>
                <input type="number" class="form-control" id="letalidade-41-ate-50" placeholder="Letalidade de 41 a 50 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;51-60</span>
                </div>
                <input type="number" class="form-control" id="letalidade-51-ate-60" placeholder="Letalidade de 51 a 60 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;61-70</span>
                </div>
                <input type="number" class="form-control" id="letalidade-61-ate-70" placeholder="Letalidade de 61 a 70 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;71-80</span>
                </div>
                <input type="number" class="form-control" id="letalidade-71-ate-80" placeholder="Letalidade de 71 a 80 anos" value="">
              </div>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">&nbsp;81-120</span>
                </div>
                <input type="number" class="form-control" id="letalidade-81-ate-120" placeholder="Letalidade de 81 a 120 anos" value="">
              </div>
            </div>

            <div class="form-check populacao-simples-campos" style="display: none">
              <input type="checkbox" class="form-check-input" id="letalidade-simples" checked onclick="jQuery('.letalidade-simples-campos').toggle()">
              <label class="form-check-label" for="letalidade-simples">Simples (letalidade padr√£o para todas as idades)</label>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <button type="submit" class="btn btn-primary" id="recalcular">Calcular simula√ß√£o</button>
          <button type="button" class="btn btn-secondary" id="resetar" title="Limpa dados salvos e recarrega p√°gina">Resetar</button>
        </div>
      </div>
       <div class="row">
         <div class="col-sm-12">
           <br>
          <div class="form-check">
             <input type="checkbox" class="form-check-input" id="termos-de-uso" checked>
             <label class="form-check-label" for="termos-de-uso">
               Sim, eu aceito os <a href="#" onclick="jQuery('#aviso-de-limitacoes').toggle();">
                 termos de uso, e entendo que este tipo de simula√ß√£o tem limita√ß√µes
               </a>
             </label>
           </div>
           <div id="aviso-de-limitacoes" class="alert alert-warning" role="alert" style="display: none">
             TODO: adicionar n√£o apenas avisos de isen√ß√£o de responsabilidade
               mas tamb√©m problemas mais √≥bvios de usar esse tipo de
               simula√ß√£o assumindo pessoas que n√£o v√£o ler as refer√™ncias
               no tema.
           </div>
         </div>
      </div>
      <hr />

    </form>

    <h2 id="resultados">Resultado simula√ß√£o atual</h2>

    <!-- <button type="submit" class="btn btn-primary">Submit</button> -->
    <div class="alert alert-info" role="alert">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Faixa-et√°ria</th>
            <th scope="col">Total inicial</th>
            <th scope="col">Total sobrevivente</th>
            <th scope="col">Total √≥bitos</th>
          </tr>
        </thead>
        <tbody>
          <tr class="populacao-simples-campos">
            <th scope="row">0-120</th>
            <td><span id="resultado-total-inicial"></span></td>
            <td><span id="resultado-vivos"></span></td>
            <td><span id="resultado-obitos" class="text-danger"></span></td>
          </tr>
          <tr class="populacao-simples-campos" style="display: none">
            <th scope="row">0-10</th>
            <td><span id="resultado-total-inicial-de-0-ate-10"></span></td>
            <td><span id="resultado-vivos-de-0-ate-10"></span></td>
            <td><span id="resultado-obitos-de-0-ate-10" class="text-danger"></span></td>
          </tr>
          <tr class="populacao-simples-campos" style="display: none">
            <th scope="row">11-20</th>
            <td><span id="resultado-total-inicial-de-11-ate-20"></span></td>
            <td><span id="resultado-vivos-de-11-ate-20"></span></td>
            <td><span id="resultado-obitos-de-11-ate-20" class="text-danger"></span></td>
          </tr>
          <tr class="populacao-simples-campos" style="display: none">
            <th scope="row">21-30</th>
            <td><span id="resultado-total-inicial-de-21-ate-30"></span></td>
            <td><span id="resultado-vivos-de-21-ate-30"></span></td>
            <td><span id="resultado-obitos-de-21-ate-30" class="text-danger"></span></td>
          </tr>
          <tr class="populacao-simples-campos" style="display: none">
            <th scope="row">31-40</th>
            <td><span id="resultado-total-inicial-de-31-ate-40"></span></td>
            <td><span id="resultado-vivos-de-31-ate-40"></span></td>
            <td><span id="resultado-obitos-de-31-ate-40" class="text-danger"></span></td>
          </tr>
          <tr class="populacao-simples-campos" style="display: none">
            <th scope="row">51-40</th>
            <td><span id="resultado-total-inicial-de-51-ate-40"></span></td>
            <td><span id="resultado-vivos-de-51-ate-40"></span></td>
            <td><span id="resultado-obitos-de-51-ate-40" class="text-danger"></span></td>
          </tr>
          <tr class="populacao-simples-campos" style="display: none">
            <th scope="row">51-60</th>
            <td><span id="resultado-total-inicial-de-51-ate-60"></span></td>
            <td><span id="resultado-vivos-de-51-ate-60"></span></td>
            <td><span id="resultado-obitos-de-51-ate-60" class="text-danger"></span></td>
          </tr>
          <tr class="populacao-simples-campos" style="display: none">
            <th scope="row">71-80</th>
            <td><span id="resultado-total-inicial-de-71-ate-80"></span></td>
            <td><span id="resultado-vivos-de-71-ate-80"></span></td>
            <td><span id="resultado-obitos-de-71-ate-80" class="text-danger"></span></td>
          </tr>
          <tr class="populacao-simples-campos" style="display: none">
            <th scope="row">81-120</th>
            <td><span id="resultado-total-inicial-de-81-ate-120"></span></td>
            <td><span id="resultado-vivos-de-81-ate-120"></span></td>
            <td><span id="resultado-obitos-de-81-ate-120" class="text-danger"></span></td>
          </tr>
        </tbody>
      </table>

    </div>
    <ol>
      <li>Funcionalidade de pr√©-carregar popula√ß√£o pr√©-definida ainda n√£o funciona; usu√°rio precisa informar manualmente</li>

      <li>A simula√ß√£o atual n√£o permite especificar faixas de idade</li>
    </ol>
    <hr />
    <div>
      <h2 id="referencias">Refer√™ncias</h2>
      <h3>Estimativas de impacto</h3>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Organiza√ß√£o</th>
            <th scope="col">T√≠tulo</th>
            <th scope="col">Coment√°rios</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">1</th>
            <td>Imperial College COVID-19 Response Team</td>
            <td>
              <a href="https://www.imperial.ac.uk/media/imperial-college/medicine/sph/ide/gida-fellowships/Imperial-College-COVID19-NPI-modelling-16-03-2020.pdf">
                Impact of non-pharmaceutical interventions (NPIs) to reduce COVID19 mortality and healthcare demand
              </a>
            </td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <h3>Refer√™ncias de modelos matem√°ticos</h3>
      <p><em>TODO: adicionair mais informa√ß√µes</em></p>
      <!--
        https://en.wikipedia.org/wiki/Mathematical_modelling_of_infectious_disease
      -->
    </div>
    <hr />
    <div class="alert alert-secondary" role="alert">
      Discuss√£o em <a href="https://www.facebook.com/groups/coronaviruscplp/permalink/539215950056726/">https://www.facebook.com/groups/coronaviruscplp/permalink/539215950056726/</a>
      <sup>(requer convite, fale com membros antes)</sup>. <br>
      GitHub <a href="https://github.com/covid-taskforce-cplp/calculadora-covid-por-pais">https://github.com/covid-taskforce-cplp/calculadora-covid-por-pais</a>. <br>
      Como √© feito o c√°lculo? Veja <a href="https://github.com/covid-taskforce-cplp/calculadora-covid-por-pais/blob/master/js/calculadora-logica.js">js/calculadora-logica.js</a>.
    </div>

  </div>

  <script src="./js/codigo-terceiros/jquery-3.4.1.slim.min.js"></script>
  <script src="./js/codigo-terceiros/popper.min.js"></script>
  <script src="./js/codigo-terceiros/bootstrap.min.js"></script>
  <script src="./js/codigo-terceiros/js.storage.min.js"></script>
  <script src="./js/calculadora-inicializacao.js"></script>
  <script src="./js/calculadora-dados.js"></script>
  <script src="./js/calculadora-logica.js"></script>
  <script src="./js/calculadora-ui.js"></script>
</body>

</html>
